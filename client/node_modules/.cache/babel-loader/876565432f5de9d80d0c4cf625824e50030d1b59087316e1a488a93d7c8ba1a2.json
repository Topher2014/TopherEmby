{"ast":null,"code":"import _objectSpread from\"/home/topher/Desktop/Flatiron/Phase5/Project/TopherEmby/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/topher/Desktop/Flatiron/Phase5/Project/TopherEmby/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useHistory,Link}from'react-router-dom';import{useFormik}from'formik';import*as yup from'yup';import{Button,ListItem,List,Container,Box,TextField,Typography,Chip,Divider,CircularProgress}from'@mui/material';import DeleteIcon from'@mui/icons-material/Delete';import PersonAddIcon from'@mui/icons-material/PersonAdd';import{styled}from'@mui/system';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GroupTitle=styled(Typography)({fontSize:24,fontWeight:'bold',marginBottom:16});var EditButton=styled(Button)({margin:'16px 0',fontWeight:'bold',color:'white',background:'#2e7d32','&:hover':{background:'#1b5e20'}});var SelectBox=styled(TextField)({margin:'16px 0'});var GroupButton=styled(Button)({margin:'0 16px',fontWeight:'bold'});var EditGroups=function EditGroups(_ref){var groups=_ref.groups,fetchGroups=_ref.fetchGroups,setGroups=_ref.setGroups,user=_ref.user;var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var formSchema=yup.object().shape({name:yup.string().required('Enter group name')});useEffect(function(){fetchGroups();},[]);var handleDelete=function handleDelete(id){setLoading(true);var newGroups=groups.filter(function(group){return group.id!==id;});fetch(\"/group/\".concat(id),{method:'DELETE'}).then(function(){setLoading(false);setGroups(newGroups);});};var formik=useFormik({initialValues:{name:''},validationSchema:formSchema,validateOnChange:false,onSubmit:function onSubmit(values,_ref2){var resetForm=_ref2.resetForm;setLoading(true);fetch('/groups',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(_objectSpread({},values))}).then(function(response){setLoading(false);if(response.ok){response.json().then(function(data){history.push('/editgroups');fetchGroups();resetForm({values:''});fetch('/groupusers',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:data.user_id,group_id:data.id})});});}});}});var renderGroups=groups.map(function(mappedGroups){return mappedGroups.groupuser;}).flat().filter(function(filteredGroups){return filteredGroups.user_id===user.id;}).map(function(group){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(List,{className:\"groupcard\",children:[/*#__PURE__*/_jsx(Chip,{label:group.groups.name,color:\"primary\",onDelete:function onDelete(){return handleDelete(group.groups.id);},deleteIcon:/*#__PURE__*/_jsx(DeleteIcon,{})}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"small\",startIcon:/*#__PURE__*/_jsx(PersonAddIcon,{}),onClick:function onClick(){return history.push(\"/addremoveusers/\".concat(group.groups.id));},children:\"Add/Remove Users\"})]})},group.groups.id);});return/*#__PURE__*/_jsxs(Container,{sx:{marginTop:10},children:[/*#__PURE__*/_jsx(Typography,{children:\" Edit Groups \"}),/*#__PURE__*/_jsxs(Box,{sx:{my:2},children:[/*#__PURE__*/_jsx(Typography,{color:\"error\",gutterBottom:true,children:formik.errors.name}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(TextField,{label:\"Name\",name:\"name\",size:\"small\",variant:\"outlined\",value:formik.values.name,onChange:formik.handleChange}),/*#__PURE__*/_jsx(Box,{sx:{ml:1},children:/*#__PURE__*/_jsx(EditButton,{type:\"submit\",variant:\"contained\",disabled:loading,size:\"large\",children:\"Add Group\"})})]}),loading&&/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mt:2},children:[/*#__PURE__*/_jsx(CircularProgress,{size:20}),/*#__PURE__*/_jsx(Box,{sx:{ml:1},children:\"Adding Group...\"})]})]})]}),/*#__PURE__*/_jsx(Divider,{sx:{mb:2}}),/*#__PURE__*/_jsx(Typography,{children:\"Your Groups:\"}),/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:renderGroups.length>0?/*#__PURE__*/_jsx(List,{sx:{display:'flex',flexDirection:'column'},children:renderGroups}):/*#__PURE__*/_jsx(Typography,{children:\"You are not a member of any groups yet.\"})})]});};export default EditGroups;","map":{"version":3,"names":["useState","useEffect","useHistory","Link","useFormik","yup","Button","ListItem","List","Container","Box","TextField","Typography","Chip","Divider","CircularProgress","DeleteIcon","PersonAddIcon","styled","jsx","_jsx","jsxs","_jsxs","GroupTitle","fontSize","fontWeight","marginBottom","EditButton","margin","color","background","SelectBox","GroupButton","EditGroups","_ref","groups","fetchGroups","setGroups","user","history","_useState","_useState2","_slicedToArray","loading","setLoading","formSchema","object","shape","name","string","required","handleDelete","id","newGroups","filter","group","fetch","concat","method","then","formik","initialValues","validationSchema","validateOnChange","onSubmit","values","_ref2","resetForm","headers","body","JSON","stringify","_objectSpread","response","ok","json","data","push","user_id","group_id","renderGroups","map","mappedGroups","groupuser","flat","filteredGroups","children","className","label","onDelete","deleteIcon","variant","size","startIcon","onClick","sx","marginTop","my","gutterBottom","errors","handleSubmit","display","alignItems","value","onChange","handleChange","ml","type","disabled","mt","mb","length","flexDirection"],"sources":["/home/topher/Desktop/Flatiron/Phase5/Project/TopherEmby/client/src/Components/EditGroups.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useHistory, Link } from 'react-router-dom';\nimport { useFormik } from 'formik';\nimport * as yup from 'yup';\nimport {\n  Button,\n  ListItem,\n  List,\n  Container,\n  Box,\n  TextField,\n  Typography,\n  Chip, Divider, CircularProgress\n} from '@mui/material';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport PersonAddIcon from '@mui/icons-material/PersonAdd';\nimport { styled } from '@mui/system';\n\nconst GroupTitle = styled(Typography)({\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 16,\n  });\n  \n  const EditButton = styled(Button)({\n    margin: '16px 0',\n    fontWeight: 'bold',\n    color: 'white',\n    background: '#2e7d32',\n    '&:hover': {\n      background: '#1b5e20',\n    },\n  });\n  \n  const SelectBox = styled(TextField)({\n    margin: '16px 0',\n  });\n  \n  const GroupButton = styled(Button)({\n    margin: '0 16px',\n    fontWeight: 'bold',\n  });\n\nconst EditGroups = ({ groups, fetchGroups, setGroups, user }) => {\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const formSchema = yup.object().shape({\n    name: yup.string().required('Enter group name'),\n  });\n\n  useEffect(() => {\n    fetchGroups();\n  }, []);\n\n  const handleDelete = (id) => {\n    setLoading(true);\n    const newGroups = groups.filter((group) => group.id !== id);\n    fetch(`/group/${id}`, {\n      method: 'DELETE',\n    }).then(() => {\n      setLoading(false);\n      setGroups(newGroups);\n    });\n  };\n\n  const formik = useFormik({\n    initialValues: {\n      name: '',\n    },\n    validationSchema: formSchema,\n    validateOnChange: false,\n    onSubmit: (values, { resetForm }) => {\n      setLoading(true);\n      fetch('/groups', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ ...values }),\n      }).then((response) => {\n        setLoading(false);\n        if (response.ok) {\n          response.json().then((data) => {\n            history.push('/editgroups');\n            fetchGroups();\n            resetForm({ values: '' });\n            fetch('/groupusers', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n              },\n              body: JSON.stringify({ user_id: data.user_id, group_id: data.id }),\n            });\n          });\n        }\n      });\n    },\n  });\n\n  const renderGroups = groups\n    .map((mappedGroups) => mappedGroups.groupuser)\n    .flat()\n    .filter((filteredGroups) => filteredGroups.user_id === user.id)\n    .map((group) => (\n      <Container key={group.groups.id}>\n        <List className='groupcard'>\n          <Chip\n            label={group.groups.name}\n            color='primary'\n            onDelete={() => handleDelete(group.groups.id)}\n            deleteIcon={<DeleteIcon />}\n          />\n          <Button\n            variant='outlined'\n            size='small'\n            startIcon={<PersonAddIcon />}\n            onClick={() => history.push(`/addremoveusers/${group.groups.id}`)}\n          >\n            Add/Remove Users\n          </Button>\n        </List>\n      </Container>\n    ));\n\n  return (\n    <Container sx={{ marginTop: 10 }}>\n      <Typography> Edit Groups </Typography>\n      <Box sx={{ my: 2 }}>\n        <Typography color='error' gutterBottom>\n          {formik.errors.name}\n        </Typography>\n        <form onSubmit={formik.handleSubmit}>\n          <Box sx={{ display: 'flex', alignItems: 'center' }}>\n            <TextField\n              label='Name'\n              name='name'\n              size='small'\n              variant='outlined'\n              value={formik.values.name}\n              onChange={formik.handleChange}\n            />\n            <Box sx={{ ml: 1 }}>\n              <EditButton\n                type='submit'\n                variant='contained'\n                disabled={loading}\n                size='large'\n              >\n                Add Group\n              </EditButton>\n            </Box>\n          </Box>\n       \n          {loading && (\n        <Box sx={{ display: 'flex', alignItems: 'center', mt: 2 }}>\n          <CircularProgress size={20} />\n          <Box sx={{ ml: 1 }}>Adding Group...</Box>\n        </Box>\n      )}\n    </form>\n  </Box>\n  <Divider sx={{ mb: 2 }} />\n  <Typography>Your Groups:</Typography>\n  <Box sx={{ mt: 2 }}>\n    {renderGroups.length > 0 ? (\n      <List sx={{ display: 'flex', flexDirection: 'column' }}>\n        {renderGroups}\n      </List>\n    ) : (\n      <Typography>You are not a member of any groups yet.</Typography>\n    )}\n  </Box>\n</Container>\n  )\n    }\n\n\nexport default EditGroups"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}