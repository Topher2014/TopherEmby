{"ast":null,"code":"import _slicedToArray from\"/home/topher/Desktop/Flatiron/Phase5/Project/TopherEmby/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{useParams}from'react-router-dom';import{Button,ListItem,List,Container,Typography,Chip,TextField}from'@mui/material';import{styled}from'@mui/system';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditButton=styled(Button)({margin:'16px 0',fontWeight:'bold',color:'white',background:'#2e7d32','&:hover':{background:'#1b5e20'}});function AddDelUsers(_ref){var users=_ref.users,fetchUsers=_ref.fetchUsers,user=_ref.user,groups=_ref.groups,fetchGroups=_ref.fetchGroups;var _useParams=useParams(),groupId=_useParams.groupId;useEffect(function(){fetchUsers();fetchGroups();},[]);function handleAddClick(user_id,group_id){fetch(\"/groupusers\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:user_id,group_id:group_id})});window.location.reload(true);}function handleDeleteClick(user_id,group_id){fetch(\"/groupusers\",{method:'DELETE',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:user_id,group_id:group_id})});window.location.reload(true);}var groupIDs=groups.map(function(mappedGroups){return mappedGroups.groupuser;}).flat().filter(function(filteredGroup){return filteredGroup.group_id===parseInt(groupId);}).map(function(group){return group.user_id;});var addUsers=user.friends.map(function(user){if(groupIDs.includes(user.id)){return null;}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(List,{className:\"usercard\",children:/*#__PURE__*/_jsx(Chip,{color:\"primary\",label:user.name,onClick:function onClick(){return handleAddClick(user.id,groupId);}})})},user.id);});var removeUsers=users.map(function(thisUser){if(user.id===thisUser.id){return null;}if(!groupIDs.includes(thisUser.id)){return null;}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(List,{className:\"usercard\",children:/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(Chip,{color:\"primary\",label:thisUser.name,onDelete:function onDelete(){return handleDeleteClick(thisUser.id,groupId);}})})})},thisUser.id);});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showFriends=_useState2[0],setShowFriends=_useState2[1];function handleClick(){setShowFriends(function(toggle){return!toggle;});}var buttonText=showFriends?/*#__PURE__*/_jsx(EditButton,{onClick:handleClick,children:\" Add Friends to Group \"}):/*#__PURE__*/_jsx(EditButton,{onClick:handleClick,children:\" Remove Friends from Group \"});var renderUsers=showFriends?removeUsers:addUsers;var friendInfo;var group=groups.filter(function(group){return group.id===parseInt(groupId);});if(groups.length===0){return null;}else{friendInfo=showFriends?/*#__PURE__*/_jsxs(Typography,{fontSize:24,children:[\" These are your friends currently in \",group[0].name,\". Click to remove. \"]}):/*#__PURE__*/_jsxs(Typography,{fontSize:24,children:[\" These are friends who can be added to \",group[0].name,\". Click to add.  \"]});}return/*#__PURE__*/_jsxs(Container,{sx:{marginTop:10},children:[/*#__PURE__*/_jsx(Typography,{children:\" Add/Remove Users to Group\"}),buttonText,friendInfo,renderUsers]});}export default AddDelUsers;","map":{"version":3,"names":["useEffect","useState","useParams","Button","ListItem","List","Container","Typography","Chip","TextField","styled","jsx","_jsx","jsxs","_jsxs","EditButton","margin","fontWeight","color","background","AddDelUsers","_ref","users","fetchUsers","user","groups","fetchGroups","_useParams","groupId","handleAddClick","user_id","group_id","fetch","method","headers","body","JSON","stringify","window","location","reload","handleDeleteClick","groupIDs","map","mappedGroups","groupuser","flat","filter","filteredGroup","parseInt","group","addUsers","friends","includes","id","children","className","label","name","onClick","removeUsers","thisUser","onDelete","_useState","_useState2","_slicedToArray","showFriends","setShowFriends","handleClick","toggle","buttonText","renderUsers","friendInfo","length","fontSize","sx","marginTop"],"sources":["/home/topher/Desktop/Flatiron/Phase5/Project/TopherEmby/client/src/Components/AddDelUsers.js"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport {Button, ListItem, List, Container, Typography, Chip, TextField} from '@mui/material';\nimport { styled } from '@mui/system';\n\n  const EditButton = styled(Button)({\n    margin: '16px 0',\n    fontWeight: 'bold',\n    color: 'white',\n    background: '#2e7d32',\n    '&:hover': {\n      background: '#1b5e20',\n    },\n  });\n\nfunction AddDelUsers({users, fetchUsers, user, groups, fetchGroups}) {\n    const {groupId} = useParams()\n    useEffect(() => {fetchUsers(); fetchGroups()}, [])\n\n    function handleAddClick(user_id, group_id){\n        fetch(`/groupusers`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({user_id: user_id, group_id: group_id}),\n        })\n            window.location.reload(true)\n    }\n\n    function handleDeleteClick(user_id, group_id){\n        fetch(`/groupusers`, {\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({user_id: user_id, group_id: group_id}),\n        })\n            window.location.reload(true)\n    }\n\n    const groupIDs = groups.map(mappedGroups => mappedGroups.groupuser).flat().filter(filteredGroup => filteredGroup.group_id === parseInt(groupId)).map(group => group.user_id)\n    const addUsers = user.friends.map((user) => {\n        if (groupIDs.includes(user.id)){\n            return null\n            }\n        return (\n            <Container key={user.id} >\n            <List className='usercard' >\n                <Chip color='primary' label={user.name} onClick={() => handleAddClick(user.id, groupId)} />\n            </List>\n            </Container>\n        )\n    })\n    const removeUsers = users.map((thisUser) => {\n        if(user.id === thisUser.id){\n            return null\n        }\n        if (!groupIDs.includes(thisUser.id)){\n            return null\n            }\n        return (\n            <Container key={thisUser.id} >\n                <List className='usercard' >\n                    <ListItem>\n                        <Chip color='primary' label={thisUser.name} onDelete={() => handleDeleteClick(thisUser.id, groupId)} />\n                    </ListItem>\n                </List>\n            </Container>\n        )\n    })\n    const [showFriends, setShowFriends] = useState(false)\n    function handleClick() {\n        setShowFriends((toggle) => !toggle)\n    }\n    const buttonText = showFriends ? <EditButton onClick={handleClick} > Add Friends to Group </EditButton> : <EditButton onClick={handleClick} > Remove Friends from Group </EditButton>\n    const renderUsers = showFriends ? removeUsers : addUsers\n    let friendInfo\n    const group = groups.filter(group => group.id === parseInt(groupId))\n    if(groups.length === 0){\n        return null\n    }\n    else{\n     friendInfo = showFriends ? <Typography fontSize={24}> These are your friends currently in {group[0].name}. Click to remove. </Typography> : <Typography fontSize={24}> These are friends who can be added to {group[0].name}. Click to add.  </Typography>\n    }\n    return (\n        <Container sx={{marginTop: 10}}>\n            <Typography> Add/Remove Users to Group</Typography>\n            {buttonText}\n            {friendInfo}\n            {renderUsers}\n        </Container>\n    )\n}\n\nexport default AddDelUsers"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}