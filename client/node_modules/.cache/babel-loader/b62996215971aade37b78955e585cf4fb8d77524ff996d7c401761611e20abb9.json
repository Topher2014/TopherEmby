{"ast":null,"code":"import _slicedToArray from\"/home/topher/Desktop/Flatiron/Phase5/Project/TopherEmby/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{Button,Container,TextField,Typography,Chip}from'@mui/material';import{styled}from'@mui/system';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditButton=styled(Button)({margin:'16px 0',fontWeight:'bold',color:'white',background:'#2e7d32','&:hover':{background:'#1b5e20'}});function FriendsUsers(_ref){var user=_ref.user,users=_ref.users,fetchUsers=_ref.fetchUsers;useEffect(function(){fetchUsers();},[]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),filteredUsers=_useState2[0],setFilteredUsers=_useState2[1];useEffect(function(){setFilteredUsers(users);},[users]);function handleAddFriendClick(friend_id){fetch('/friendships',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:parseInt(user.id),friend_id:parseInt(friend_id)})}).then(function(res){if(res.ok){window.location.reload(true);}else console.log('error adding friend');});}function handleDeleteFriendClick(friend_id){fetch('/friendships',{method:'DELETE',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:parseInt(user.id),friend_id:parseInt(friend_id)})}).catch(function(err){return console.log(err);});window.location.reload(true);}var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showFriends=_useState4[0],setShowFriends=_useState4[1];function handleClick(){setShowFriends(function(toggle){return!toggle;});}var buttonText=showFriends?/*#__PURE__*/_jsx(EditButton,{onClick:handleClick,children:\" Show Friends \"}):/*#__PURE__*/_jsx(EditButton,{onClick:handleClick,children:\" Show All Users \"});var searchText=showFriends?'Search All Users':'Search Friends';var friendIDs=user.friends.map(function(friend){return friend.id;});var handleChange=function handleChange(event){var search=event.target.value.toLowerCase();setFilteredUsers(users.filter(function(user){var usernameBool=user.name.toLowerCase().includes(search);var emailBool=user.email.toLowerCase().includes(search);return usernameBool||emailBool;}));};var renderUsers=filteredUsers.map(function(filteredUser){var isFriend=friendIDs.includes(filteredUser.id);if(filteredUser.id===user.id){return'';}if(!showFriends){if(friendIDs.includes(filteredUser.id)){return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"br\",{}),isFriend?/*#__PURE__*/_jsx(Chip,{color:\"primary\",label:filteredUser.name,onDelete:function onDelete(){return handleDeleteFriendClick(filteredUser.id);}}):/*#__PURE__*/_jsx(Chip,{color:\"primary\",label:filteredUser.name,onClick:function onClick(){return handleAddFriendClick(filteredUser.id);}}),/*#__PURE__*/_jsx(\"br\",{})]},filteredUser.id);}else return null;}else if(showFriends){return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"br\",{}),isFriend?/*#__PURE__*/_jsx(Chip,{color:\"primary\",label:filteredUser.name,onDelete:function onDelete(){return handleDeleteFriendClick(filteredUser.id);}}):/*#__PURE__*/_jsx(Chip,{color:\"primary\",label:filteredUser.name,onClick:function onClick(){return handleAddFriendClick(filteredUser.id);}}),/*#__PURE__*/_jsx(\"br\",{})]},filteredUser.id);}return null;});return/*#__PURE__*/_jsxs(Container,{sx:{marginTop:10},children:[/*#__PURE__*/_jsx(Typography,{children:\" Users and Friends \"}),buttonText,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextField,{label:searchText,onChange:function onChange(event){return handleChange(event);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),renderUsers]});}export default FriendsUsers;","map":{"version":3,"names":["useEffect","useState","Button","Container","TextField","Typography","Chip","styled","jsx","_jsx","jsxs","_jsxs","EditButton","margin","fontWeight","color","background","FriendsUsers","_ref","user","users","fetchUsers","_useState","_useState2","_slicedToArray","filteredUsers","setFilteredUsers","handleAddFriendClick","friend_id","fetch","method","headers","body","JSON","stringify","user_id","parseInt","id","then","res","ok","window","location","reload","console","log","handleDeleteFriendClick","catch","err","_useState3","_useState4","showFriends","setShowFriends","handleClick","toggle","buttonText","onClick","children","searchText","friendIDs","friends","map","friend","handleChange","event","search","target","value","toLowerCase","filter","usernameBool","name","includes","emailBool","email","renderUsers","filteredUser","isFriend","label","onDelete","sx","marginTop","onChange"],"sources":["/home/topher/Desktop/Flatiron/Phase5/Project/TopherEmby/client/src/Components/FriendsUsers.js"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport {Button, Container, TextField, Typography, Chip} from '@mui/material';\nimport { styled } from '@mui/system';\n\nconst EditButton = styled(Button)({\n  margin: '16px 0',\n  fontWeight: 'bold',\n  color: 'white',\n  background: '#2e7d32',\n  '&:hover': {\n    background: '#1b5e20',\n  },\n});\n\nfunction FriendsUsers({user, users, fetchUsers}) {\n    useEffect(() => {fetchUsers()}, [])\n    const [filteredUsers, setFilteredUsers] = useState([])\n    useEffect(() => {setFilteredUsers(users)}, [users])\n\n    function handleAddFriendClick(friend_id) {\n        fetch('/friendships', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                user_id: parseInt(user.id),\n                friend_id: parseInt(friend_id)\n            })\n        })\n        .then(res => {\n            if(res.ok) {\n                window.location.reload(true)\n            } else console.log('error adding friend')\n        })\n    }\n\n    function handleDeleteFriendClick(friend_id) {\n        fetch('/friendships', {\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                user_id: parseInt(user.id),\n                friend_id: parseInt(friend_id)\n            })\n        })\n        .catch(err => console.log(err))\n        window.location.reload(true)\n    }\n    const [showFriends, setShowFriends] = useState(false)\n    function handleClick() {\n        setShowFriends((toggle) => !toggle)\n    }\n    const buttonText = showFriends ? <EditButton onClick={handleClick} > Show Friends </EditButton> : <EditButton onClick={handleClick} > Show All Users </EditButton>\n    const searchText = showFriends ? 'Search All Users' : 'Search Friends' \n    \n    const friendIDs = user.friends.map(friend => friend.id)\n    const handleChange = (event) => {\n        const search = event.target.value.toLowerCase()\n        setFilteredUsers(users.filter(user => {\n            const usernameBool = user.name.toLowerCase().includes(search)\n            const emailBool = user.email.toLowerCase().includes(search)\n            return usernameBool || emailBool\n        }))\n    }\n    const renderUsers = filteredUsers.map(filteredUser => {\n        const isFriend = friendIDs.includes(filteredUser.id)\n        if (filteredUser.id === user.id){\n            return ''\n        }\n        if (!showFriends){\n            if (friendIDs.includes(filteredUser.id)){\n            return (\n            <Container key={filteredUser.id}>\n                <br></br>\n                {isFriend ? <Chip color='primary' label={filteredUser.name} onDelete={() => handleDeleteFriendClick(filteredUser.id)} />  : <Chip color='primary' label={filteredUser.name} onClick={() => handleAddFriendClick(filteredUser.id)} /> }\n                <br></br>\n            </Container>\n            )\n            }\n            else return null\n            }\n        else if (showFriends){\n            return (\n            <Container key={filteredUser.id}>\n                <br></br>\n                {isFriend ? <Chip color='primary' label={filteredUser.name} onDelete={() => handleDeleteFriendClick(filteredUser.id)} /> : <Chip color='primary' label={filteredUser.name} onClick={() => handleAddFriendClick(filteredUser.id)} />}\n                <br></br>\n            </Container>\n            )\n            }\n    return null\n    })\n\n    return (\n        <Container sx={{marginTop: 10}}>\n            <Typography> Users and Friends </Typography>\n            {buttonText}\n            <br></br>\n            <br></br>\n            <TextField label={searchText} onChange={(event) => handleChange(event)}/>  \n            <br></br>\n            <br></br>\n            {renderUsers}\n        </Container>\n    )\n}\n\nexport default FriendsUsers"],"mappings":"oJAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAAQC,MAAM,CAAEC,SAAS,CAAEC,SAAS,CAAEC,UAAU,CAAEC,IAAI,KAAO,eAAe,CAC5E,OAASC,MAAM,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAErC,GAAM,CAAAC,UAAU,CAAGL,MAAM,CAACL,MAAM,CAAC,CAAC,CAChCW,MAAM,CAAE,QAAQ,CAChBC,UAAU,CAAE,MAAM,CAClBC,KAAK,CAAE,OAAO,CACdC,UAAU,CAAE,SAAS,CACrB,SAAS,CAAE,CACTA,UAAU,CAAE,SACd,CACF,CAAC,CAAC,CAEF,QAAS,CAAAC,YAAYA,CAAAC,IAAA,CAA4B,IAA1B,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,KAAK,CAAAF,IAAA,CAALE,KAAK,CAAEC,UAAU,CAAAH,IAAA,CAAVG,UAAU,CAC1CrB,SAAS,CAAC,UAAM,CAACqB,UAAU,EAAE,EAAC,CAAE,EAAE,CAAC,CACnC,IAAAC,SAAA,CAA0CrB,QAAQ,CAAC,EAAE,CAAC,CAAAsB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/CG,aAAa,CAAAF,UAAA,IAAEG,gBAAgB,CAAAH,UAAA,IACtCvB,SAAS,CAAC,UAAM,CAAC0B,gBAAgB,CAACN,KAAK,CAAC,EAAC,CAAE,CAACA,KAAK,CAAC,CAAC,CAEnD,QAAS,CAAAO,oBAAoBA,CAACC,SAAS,CAAE,CACrCC,KAAK,CAAC,cAAc,CAAE,CAClBC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBC,OAAO,CAAEC,QAAQ,CAACjB,IAAI,CAACkB,EAAE,CAAC,CAC1BT,SAAS,CAAEQ,QAAQ,CAACR,SAAS,CACjC,CAAC,CACL,CAAC,CAAC,CACDU,IAAI,CAAC,SAAAC,GAAG,CAAI,CACT,GAAGA,GAAG,CAACC,EAAE,CAAE,CACPC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,IAAI,CAAC,CAChC,CAAC,IAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC,CAC7C,CAAC,CAAC,CACN,CAEA,QAAS,CAAAC,uBAAuBA,CAAClB,SAAS,CAAE,CACxCC,KAAK,CAAC,cAAc,CAAE,CAClBC,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBC,OAAO,CAAEC,QAAQ,CAACjB,IAAI,CAACkB,EAAE,CAAC,CAC1BT,SAAS,CAAEQ,QAAQ,CAACR,SAAS,CACjC,CAAC,CACL,CAAC,CAAC,CACDmB,KAAK,CAAC,SAAAC,GAAG,QAAI,CAAAJ,OAAO,CAACC,GAAG,CAACG,GAAG,CAAC,GAAC,CAC/BP,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,IAAI,CAAC,CAChC,CACA,IAAAM,UAAA,CAAsChD,QAAQ,CAAC,KAAK,CAAC,CAAAiD,UAAA,CAAA1B,cAAA,CAAAyB,UAAA,IAA9CE,WAAW,CAAAD,UAAA,IAAEE,cAAc,CAAAF,UAAA,IAClC,QAAS,CAAAG,WAAWA,CAAA,CAAG,CACnBD,cAAc,CAAC,SAACE,MAAM,QAAK,CAACA,MAAM,GAAC,CACvC,CACA,GAAM,CAAAC,UAAU,CAAGJ,WAAW,cAAG1C,IAAA,CAACG,UAAU,EAAC4C,OAAO,CAAEH,WAAY,CAAAI,QAAA,CAAE,gBAAc,EAAa,cAAGhD,IAAA,CAACG,UAAU,EAAC4C,OAAO,CAAEH,WAAY,CAAAI,QAAA,CAAE,kBAAgB,EAAa,CAClK,GAAM,CAAAC,UAAU,CAAGP,WAAW,CAAG,kBAAkB,CAAG,gBAAgB,CAEtE,GAAM,CAAAQ,SAAS,CAAGxC,IAAI,CAACyC,OAAO,CAACC,GAAG,CAAC,SAAAC,MAAM,QAAI,CAAAA,MAAM,CAACzB,EAAE,GAAC,CACvD,GAAM,CAAA0B,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,KAAK,CAAK,CAC5B,GAAM,CAAAC,MAAM,CAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAACC,WAAW,EAAE,CAC/C1C,gBAAgB,CAACN,KAAK,CAACiD,MAAM,CAAC,SAAAlD,IAAI,CAAI,CAClC,GAAM,CAAAmD,YAAY,CAAGnD,IAAI,CAACoD,IAAI,CAACH,WAAW,EAAE,CAACI,QAAQ,CAACP,MAAM,CAAC,CAC7D,GAAM,CAAAQ,SAAS,CAAGtD,IAAI,CAACuD,KAAK,CAACN,WAAW,EAAE,CAACI,QAAQ,CAACP,MAAM,CAAC,CAC3D,MAAO,CAAAK,YAAY,EAAIG,SAAS,CACpC,CAAC,CAAC,CAAC,CACP,CAAC,CACD,GAAM,CAAAE,WAAW,CAAGlD,aAAa,CAACoC,GAAG,CAAC,SAAAe,YAAY,CAAI,CAClD,GAAM,CAAAC,QAAQ,CAAGlB,SAAS,CAACa,QAAQ,CAACI,YAAY,CAACvC,EAAE,CAAC,CACpD,GAAIuC,YAAY,CAACvC,EAAE,GAAKlB,IAAI,CAACkB,EAAE,CAAC,CAC5B,MAAO,EAAE,CACb,CACA,GAAI,CAACc,WAAW,CAAC,CACb,GAAIQ,SAAS,CAACa,QAAQ,CAACI,YAAY,CAACvC,EAAE,CAAC,CAAC,CACxC,mBACA1B,KAAA,CAACR,SAAS,EAAAsD,QAAA,eACNhD,IAAA,SAAS,CACRoE,QAAQ,cAAGpE,IAAA,CAACH,IAAI,EAACS,KAAK,CAAC,SAAS,CAAC+D,KAAK,CAAEF,YAAY,CAACL,IAAK,CAACQ,QAAQ,CAAE,SAAAA,SAAA,QAAM,CAAAjC,uBAAuB,CAAC8B,YAAY,CAACvC,EAAE,CAAC,EAAC,EAAG,cAAI5B,IAAA,CAACH,IAAI,EAACS,KAAK,CAAC,SAAS,CAAC+D,KAAK,CAAEF,YAAY,CAACL,IAAK,CAACf,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA7B,oBAAoB,CAACiD,YAAY,CAACvC,EAAE,CAAC,EAAC,EAAG,cACpO5B,IAAA,SAAS,GAHGmE,YAAY,CAACvC,EAAE,CAInB,CAEZ,CAAC,IACI,OAAO,KAAI,CAChB,CAAC,IACA,IAAIc,WAAW,CAAC,CACjB,mBACAxC,KAAA,CAACR,SAAS,EAAAsD,QAAA,eACNhD,IAAA,SAAS,CACRoE,QAAQ,cAAGpE,IAAA,CAACH,IAAI,EAACS,KAAK,CAAC,SAAS,CAAC+D,KAAK,CAAEF,YAAY,CAACL,IAAK,CAACQ,QAAQ,CAAE,SAAAA,SAAA,QAAM,CAAAjC,uBAAuB,CAAC8B,YAAY,CAACvC,EAAE,CAAC,EAAC,EAAG,cAAG5B,IAAA,CAACH,IAAI,EAACS,KAAK,CAAC,SAAS,CAAC+D,KAAK,CAAEF,YAAY,CAACL,IAAK,CAACf,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA7B,oBAAoB,CAACiD,YAAY,CAACvC,EAAE,CAAC,EAAC,EAAG,cACnO5B,IAAA,SAAS,GAHGmE,YAAY,CAACvC,EAAE,CAInB,CAEZ,CACR,MAAO,KAAI,CACX,CAAC,CAAC,CAEF,mBACI1B,KAAA,CAACR,SAAS,EAAC6E,EAAE,CAAE,CAACC,SAAS,CAAE,EAAE,CAAE,CAAAxB,QAAA,eAC3BhD,IAAA,CAACJ,UAAU,EAAAoD,QAAA,CAAC,qBAAmB,EAAa,CAC3CF,UAAU,cACX9C,IAAA,SAAS,cACTA,IAAA,SAAS,cACTA,IAAA,CAACL,SAAS,EAAC0E,KAAK,CAAEpB,UAAW,CAACwB,QAAQ,CAAE,SAAAA,SAAClB,KAAK,QAAK,CAAAD,YAAY,CAACC,KAAK,CAAC,EAAC,EAAE,cACzEvD,IAAA,SAAS,cACTA,IAAA,SAAS,CACRkE,WAAW,GACJ,CAEpB,CAEA,cAAe,CAAA1D,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}